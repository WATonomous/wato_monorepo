name: Docker test

inputs:
  image:
    description: "the image to be tested"
    required: true
  service:
    description: "the service being tested"
    required: true
  source_branch:
    description: "the source branch"
    required: true

runs: 
  using: "composite"
  steps:
    - name: Setup tmate session
      uses: mxschmitt/action-tmate@v3

    - run: ${{ github.action_path }}/test_image.sh
      shell: bash
      env:
        BACKUP_TAG: ${{ inputs.source_branch }}
        IMAGE: ${{ inputs.image }}
        SERVICE: ${{ inputs.service }}
