# action_launch.yaml

launch:

  - node:
      pkg: "local_planning"
      exec: "local_planner_node"
      name: "local_planner_node"
      namespace: "action/local_planning"
      output: "screen"
      param:
        - from: "$(find-pkg-share local_planning)/config/local_planner_params.yaml"
      remap:
        - from: "lanelet_ahead"
          to: "/world_modeling/lanelet/lanelet_ahead"
        - from: "odom"
          to: "/ego/odom"
        - from: "execute_behaviour"
          to: "/behaviour/execute_behaviour"

  - node:
      pkg: "wato_trajectory_planner"
      exec: "wato_trajectory_planner_node"
      name: "trajectory_planner_node"
      namespace: "action/trajectory_planning"
      output: "screen"
      param:
        - from: "$(find-pkg-share wato_trajectory_planner)/config/trajectory_planner_params.yaml"
      remap:
        - from: "input_path"
          to: "/action/local_planning/path"
        - from: "costmap"
          to: "/world_modeling/costmap"
        - from: "trajectory"
          to: "/action/trajectory_planning/trajectory"
        - from: "lane_context"
          to: "/world_modeling/lanelet/lane_context"

  # Lifecycle Manager
  - node:
      pkg: "wato_lifecycle_manager"
      exec: "wato_lifecycle_manager_node"
      name: "action_lifecycle_manager"
      namespace: "action"
      param:
        - name: "node_names"
          value: ["/action/local_planning/local_planner_node", "/action/trajectory_planning/trajectory_planner_node"]
        - name: "autostart"
          value: true
        - name: "bond_enabled"
          value: false
        - name: "transition_timeout_s"
          value: 30.0
