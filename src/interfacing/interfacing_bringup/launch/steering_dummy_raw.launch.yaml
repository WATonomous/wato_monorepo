---
launch:
  - arg:
      name: "autostart"
      default: "true"
      description: "Automatically configure and activate managed nodes"

  - arg:
      name: "bond_enabled"
      default: "false"
      description: "Enable bond-based crash detection"

  # Steering Dummy
  - node:
      pkg: dummy_ackermann
      exec: ackermann_square_wave_node
      name: ackermann_square_wave
      namespace: interfacing
      output: screen
      param:
        - from: "$(find-pkg-share dummy_ackermann)/config/dummy_ackermann.yaml"

  # Joystick Node (Required to arm)
  - include:
      file: "$(find-pkg-share joystick_interfacing)/launch/joystick_interfacing.launch.yaml"

  # PID Control Raw Node (no control_toolbox)
  - include:
      file: "$(find-pkg-share pid_control_raw)/launch/pid_control_raw.launch.yaml"

  # OSCC interfacing Node
  - include:
      file: "$(find-pkg-share oscc_interfacing)/launch/oscc_interfacing.launch.yaml"

  # Car Steering Feedback (direct CAN read, replaces OSCC steering angle)
  - node:
      pkg: car_steering_feedback
      exec: car_steering_feedback_node
      name: car_steering_feedback_node
      output: screen
      param:
        - from: "$(find-pkg-share car_steering_feedback)/config/car_steering_feedback.yaml"

  # Lifecycle Manager
  - node:
      pkg: wato_lifecycle_manager
      exec: wato_lifecycle_manager_node
      name: interfacing_lifecycle_manager
      output: screen
      param:
        - name: node_names
          value:
            - /interfacing/joystick_node
            - /interfacing/pid_control_raw_node
            - /interfacing/ackermann_square_wave
        - name: autostart
          value: $(var autostart)
        - name: transition_timeout_s
          value: 10.0
        - name: bond_timeout_s
          value: 4.0
        - name: bond_enabled
          value: $(var bond_enabled)
