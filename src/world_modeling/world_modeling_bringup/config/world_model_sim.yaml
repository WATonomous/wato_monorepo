# Copyright (c) 2025-present WATonomous. All rights reserved.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

# World Model configuration for simulation
/**/world_model:
  ros__parameters:
    # Map configuration
    osm_map_path: "/opt/watonomous/maps/osm/Town10HD_with_regulatory.osm"
    # Projector type: "utm" for real-world maps, "local_cartesian" for CARLA/simulation maps
    projector_type: "local_cartesian"

    # Frame IDs
    map_frame: "map"
    utm_frame: "utm"

    # Entity tracking
    entity_history_duration_sec: 5.0
    entity_prune_timeout_sec: 2.0

    # Traffic light tracking
    traffic_light_timeout_sec: 1.0

    # Background worker intervals
    cleanup_interval_ms: 1000.0
    enrichment_interval_ms: 100.0

    # Publisher rates
    lane_context_publish_rate_hz: 10.0
    map_viz_publish_rate_hz: 1.0
    map_viz_radius_m: 100.0
    dynamic_objects_publish_rate_hz: 10.0
    route_ahead_publish_rate_hz: 10.0
    route_ahead_lookahead_m: 100.0

    # Area occupancy detection
    area_occupancy_publish_rate_hz: 20.0
    area_occupancy_frame: "base_link"
    occupancy_areas:
      - "front_near"
      - "front_far"
      - "left_blind_spot"
      - "right_blind_spot"

    # Area definitions
    occupancy_area:
      front_near:
        type: "rectangle"
        center_x: 10.0
        center_y: 0.0
        length: 20.0
        width: 4.0
      front_far:
        type: "rectangle"
        center_x: 35.0
        center_y: 0.0
        length: 30.0
        width: 6.0
      left_blind_spot:
        type: "partial_circle"
        center_x: -2.0
        center_y: 2.0
        radius: 5.0
        start_angle_deg: 90.0
        end_angle_deg: 180.0
      right_blind_spot:
        type: "partial_circle"
        center_x: -2.0
        center_y: -2.0
        radius: 5.0
        start_angle_deg: 180.0
        end_angle_deg: 270.0

/**/map_viz_markers_node:
  ros__parameters:
    frame_id: "map"
    show_centerlines: true
    show_stop_lines: true
    show_traffic_lights: true
    show_direction_arrows: true
    show_speed_limits: false
    show_yield_markers: true
    use_boundary_colors: true
    boundary_line_width: 0.15
    centerline_line_width: 0.05
    stop_line_width: 0.3
    traffic_light_radius: 0.5
    direction_arrow_spacing: 15.0
    direction_arrow_size: 0.8
    speed_limit_text_height: 1.0
    yield_marker_size: 1.5

/**/lane_context_markers_node:
  ros__parameters:
    frame_id: "map"
    boundary_line_width: 0.25
    centerline_line_width: 0.1

/**/route_ahead_markers_node:
  ros__parameters:
    frame_id: "map"
    centerline_line_width: 0.4
    show_lanelet_ids: false
    show_route_info: true
